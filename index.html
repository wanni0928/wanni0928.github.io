<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Wannistudio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="My development Journal blog.">
<meta property="og:type" content="website">
<meta property="og:title" content="Wannistudio">
<meta property="og:url" content="https://wanni0928.github.io/index.html">
<meta property="og:site_name" content="Wannistudio">
<meta property="og:description" content="My development Journal blog.">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="wanni0928">
<meta property="article:tag" content="backend, develope, server">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Wannistudio" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Wannistudio</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://wanni0928.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-JPA-basic-2-Objec-Table-mapping" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/09/JPA-basic-2-Objec-Table-mapping/" class="article-date">
  <time datetime="2020-09-09T01:58:22.000Z" itemprop="datePublished">2020-09-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/09/JPA-basic-2-Objec-Table-mapping/">JPA_basic -2- Objec&amp;Table mapping</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Entity"><a href="#Entity" class="headerlink" title="@Entity"></a>@Entity</h1><ul>
<li><code>@Entity</code>가 붙은 클래스는 JPA가 관리, 엔티티라 한다.</li>
<li>JPA를 사용해서 테이블과 매핑할 클래스는 <code>@JPA</code>필수</li>
<li>주의<ul>
<li>기본 생성자 필수(파라미터가 없는 public 혹은 protected 생성)</li>
<li>final 클래스, enum, interface, inner 클래스 사용 x</li>
<li>저장할 필드에 final 사용 x</li>
</ul>
</li>
</ul>
<h1 id="Entity-속성-관리"><a href="#Entity-속성-관리" class="headerlink" title="@Entity 속성 관리"></a>@Entity 속성 관리</h1><ul>
<li>속성 : name<ul>
<li>JPA에서 사용할 엔티티 이름을 지정한다.</li>
<li>기본값 : 클래스 이름을 그대로 사용(예 : Member)</li>
<li>같은 클래스 이름이 없으면 가급적 기본값을 사용한다.</li>
</ul>
</li>
</ul>
<h1 id="Table"><a href="#Table" class="headerlink" title="@Table"></a>@Table</h1><ul>
<li><code>@Table</code>은 엔티티와 매핑할 테이블 지정<ul>
<li>name : 매핑할 테이블 이름, 기본값 : 엔티티 이름을 그대로 사용</li>
<li>catalog : 데이터베이스 catalog 매핑</li>
<li>schema : 데이터베이스 schema 매핑</li>
<li>uniqueConstraints : DDL 생성 시에 유니크 제약 조건 생성</li>
</ul>
</li>
</ul>
<h1 id="데이터베이스-스키마-자동-생성"><a href="#데이터베이스-스키마-자동-생성" class="headerlink" title="데이터베이스 스키마 자동 생성"></a>데이터베이스 스키마 자동 생성</h1><ul>
<li>DDL을 애플리케이션 실행 시점에 자동 생성</li>
<li>테이블 중심 -&gt; 객체 중심</li>
<li>데이터 베이스 방언을 활용해서 데이터 베이스에 맞는 적절한 DDL 생성</li>
<li>이렇게 생성된 DDL은 개발 장비에서만 사용</li>
<li>생성된 DDL은 운영서버에서는 사용하지 않거나, 적절히 다듬은 후 사용</li>
</ul>
<h1 id="데이터베이스-스키마-자동-생성-속성"><a href="#데이터베이스-스키마-자동-생성-속성" class="headerlink" title="데이터베이스 스키마 자동 생성 - 속성"></a>데이터베이스 스키마 자동 생성 - 속성</h1><p><code>hibernate.hbm2ddl.auto</code></p>
<ul>
<li>create : 기존테이블 삭제 후 다시 생성 (DROP + CREATE)</li>
<li>create-drop : create와 같으나 종료 시점에 테이블 DROP</li>
<li>update: 변경분만 반영(운영 DB에는 사용 x)</li>
<li>validate : 엔티티와 테이블 정상 매핑 되었는지만 확인</li>
<li>none : 사용하지 않음</li>
</ul>
<h1 id="데이터베이스-스키마-자동-생성-주의"><a href="#데이터베이스-스키마-자동-생성-주의" class="headerlink" title="데이터베이스 스키마 자동 생성 -주의"></a>데이터베이스 스키마 자동 생성 -주의</h1><ul>
<li>운영 장비에는 절대 <code>create</code>, <code>create-drop</code>, <code>update</code>를 사용하면 안된다.</li>
<li>개발 초기 단계는 <code>create</code> 또는 <code>update</code></li>
<li>테스트 서버는 <code>update</code> 또는 <code>validate</code></li>
<li>스테이징과 운영 서버는 <code>validate</code> 또는 <code>none</code></li>
</ul>
<h1 id="필드와-컬럼-매핑"><a href="#필드와-컬럼-매핑" class="headerlink" title="필드와 컬럼 매핑"></a>필드와 컬럼 매핑</h1><ul>
<li>회원은 일반 회원과 관리자로 구분해야한다.</li>
<li>회원 가입일과 수정일이 있어야 한다.</li>
<li>회원을 설명할 수 있는 필드가 있어야 한다. 이 필드는 길이 제한이 없다.</li>
</ul>
<h1 id="매핑-어노테이션-정리"><a href="#매핑-어노테이션-정리" class="headerlink" title="매핑 어노테이션 정리"></a>매핑 어노테이션 정리</h1><ul>
<li><code>@Column</code>     : 컬럼 매핑</li>
<li><code>@Temporal</code>   : 날짜 타입 매핑</li>
<li><code>@Enumerated</code> : enum 타입 매핑</li>
<li><code>@Lob</code>        : BLOB, CLOB 매핑</li>
<li><code>@Transient</code>  : 특정 필드를 컬럼에 매핑하지 않음(매핑 무시)</li>
</ul>
<h1 id="Column"><a href="#Column" class="headerlink" title="@Column"></a>@Column</h1><ul>
<li><code>name</code> : 필드와 매핑할 테이블의 컬럼 이름 (기본값 : 객체의 필드이름)</li>
<li><code>insertable</code>, <code>updatable</code> : 등록, 변경 가능 여부(기본 : TRUE)</li>
<li><code>nullable(DDL)</code> : null 값의 허용여부를 설정한다. <code>false</code>로 설정하면 DDL 생성 시 <code>not null</code> 제약조건이 붙는다.</li>
<li><code>unique(DDL)</code> : <code>@Table</code>의 <code>uniqueConstraints</code>와 같지만 한 컬럼에 간단히 유니크 제약조건을 걸 때 사용한다.</li>
<li><code>columnDefinition(DDL)</code> : 데이터베이스 컬럼 정보를 직접 줄 수 있다.(필드의 자바 타입과 방언 정보를 사용)<ul>
<li>ex: <code>varchar(100) default &#39;EMPTY&#39;</code></li>
</ul>
</li>
<li><code>length(DDL)</code> : 문자 길이 제약조건, String 타입에만 사용한다. (기본 255)</li>
<li><code>precision</code>, <code>scale(DDL)</code> : BigDecimal 타입에서 사용한다.(BigInteger도 사용할 수 있다.) precision은 소수점을 포함한 전체 자릿수를 scale은 소수의 자리수다. 참고로 double, float 타입에는 적용되지 않는다. 아주 큰 숫나자 정밀한 소수를 다루어야 할 때만 사용한다.</li>
</ul>
<h1 id="Enumerated"><a href="#Enumerated" class="headerlink" title="@Enumerated"></a>@Enumerated</h1><ul>
<li>자바 enum 타입을 매핑할 때 사용</li>
</ul>
<blockquote>
<p>주의! ORDINAL 사용x</p>
</blockquote>
<ul>
<li>value<ul>
<li><code>EnumType.ORDINAL</code> : enum 순서를 데이터베이스에 저장</li>
<li><code>EnumType.STRING</code> : enum 이름을 데이터베이스에 저장</li>
<li>기본값 : <code>EnumType.ORDINAL</code></li>
</ul>
</li>
</ul>
<h1 id="Temporal-hibernate-최신-버전에는-안써도-됨"><a href="#Temporal-hibernate-최신-버전에는-안써도-됨" class="headerlink" title="@Temporal (hibernate 최신 버전에는 안써도 됨.)"></a>@Temporal (hibernate 최신 버전에는 안써도 됨.)</h1><ul>
<li>날짜 타입(java.util.Date, java.util.Calendar)을 매핑할 때 사용</li>
<li>참고 : LocalDate, LocalDateTime을 사용할 때는 생략 가능(최신 하이버네이트 지원)</li>
<li>value<ul>
<li>TemporalType.DATE : 날짜, 데이터베이스 data 타입과 매핑(예 2013-10-11)</li>
<li>TemporalType.TIME : 시간, 데이터베이스 time 타입과 매핑(예 11:11:11)</li>
<li>TemporalType.TIMESTAMP : 날짜와 시간, 데이터베이스 timestamp 타입과 매핑 (예 2013-10-11 11:11:11)</li>
</ul>
</li>
</ul>
<h1 id="Lob"><a href="#Lob" class="headerlink" title="@Lob"></a>@Lob</h1><p>데이터베이스 BLOB, CLOB 타입과 매핑</p>
<ul>
<li><code>@Lob</code>에는 지정할 수 있는 속성이 없다.</li>
<li>매핑하는 필드 타입이 문자면 CLOB 매핑, 나머지는 BLOB 매핑<ul>
<li>CLOB : String, char[], java.sql.CLOB</li>
<li>BLOB : byte[], java.sql.BLOB</li>
</ul>
</li>
</ul>
<h1 id="기본-키-매핑-어노테이션"><a href="#기본-키-매핑-어노테이션" class="headerlink" title="기본 키 매핑 어노테이션"></a>기본 키 매핑 어노테이션</h1><ul>
<li><code>@Id</code></li>
<li><code>@GeneratedValue</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Id</span> <span class="meta">@GeneratedValue(strategy = GenerationType.Auto)</span></span><br><span class="line"><span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure>

<h1 id="기본-키-매핑-방법"><a href="#기본-키-매핑-방법" class="headerlink" title="기본 키 매핑 방법"></a>기본 키 매핑 방법</h1><ul>
<li>직접 할당 : @Id만 사용</li>
<li>자동 생성(@GeneratedValue)<ul>
<li>IDENTITY : 데이터베이스에 위임, MYSQL</li>
<li>SEQUENCE : 데이터베이스 시퀀스 오브젝트 사용, ORACLE<ul>
<li>@SequenceGenerator 필요</li>
</ul>
</li>
<li>TABLE : 키 생성용 테이블 사용, 모든 DB에서 사용<ul>
<li>@TableGenerator 필요</li>
</ul>
</li>
<li>AUTO : 방언에 따라 자동 지정, 기본값</li>
</ul>
</li>
</ul>
<h1 id="직접-할당"><a href="#직접-할당" class="headerlink" title="직접 할당"></a>직접 할당</h1><ul>
<li>@Id</li>
</ul>
<h1 id="IDENTITY-전략-특징"><a href="#IDENTITY-전략-특징" class="headerlink" title="IDENTITY 전략 - 특징"></a>IDENTITY 전략 - 특징</h1><ul>
<li>기본 키 생성을 데이터베이스에 위임</li>
<li>주로 MYSQL, PostreSQL, SQL Server, DB2에서 사용(예: MySQL의 AUTO_INCREMENT)</li>
<li>JPA는 보통 트랜잭션 커밋 시점에 INSERT SQL 실행</li>
<li>AUTO_INCREMENT는 데이터베이스에 INSERT SQL을 실행한 이후에 ID 값을 알 수 있음</li>
<li>IDENTITY 전략은 <code>em.persist()</code> 시점에 즉시 INSERT SQL 실행하고 DB에서 식별자를 조회</li>
<li>모아놨다가 한꺼번에 실행하는 전략은 사용 불가</li>
</ul>
<h1 id="IDENTITY-전략-매핑"><a href="#IDENTITY-전략-매핑" class="headerlink" title="IDENTITY 전략 - 매핑"></a>IDENTITY 전략 - 매핑</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure>

<h1 id="SEQUENCE-전략-특징"><a href="#SEQUENCE-전략-특징" class="headerlink" title="SEQUENCE 전략 - 특징"></a>SEQUENCE 전략 - 특징</h1><ul>
<li>데이터베이스 시퀀스는 유일한 값을 순서대로 생성하는 특별한 데이터베이스 오브젝트(예: 오라클 시퀀스)</li>
<li>오라클, PostgreSQL, DB2, H2 데이터베이스에서 사용</li>
</ul>
<h1 id="SEQUENCE-전략-매핑"><a href="#SEQUENCE-전략-매핑" class="headerlink" title="SEQUENCE 전략 - 매핑"></a>SEQUENCE 전략 - 매핑</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@SequenceGenerator(</span></span><br><span class="line"><span class="meta">    name = &quot;MEMBER_SEQ_GENERATOR&quot;,</span></span><br><span class="line"><span class="meta">    sequenceName = &quot;MEMBER_SEQ&quot;,</span></span><br><span class="line"><span class="meta">    initialValue = 1, allocationSize = 1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.SEQUENCE,</span></span><br><span class="line"><span class="meta">                generator = &quot;MEMBER_SEQ_GENERATOR&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure>

<h1 id="SEQUENCE-SequenceGenerator"><a href="#SEQUENCE-SequenceGenerator" class="headerlink" title="SEQUENCE - @SequenceGenerator"></a>SEQUENCE - @SequenceGenerator</h1><ul>
<li>주의 : allocationSize 기본값 = 50</li>
<li>name : 식별자 생성기 이름 (필수)</li>
<li>sequenceName : 데이터베이스에 등록되어 있는 시퀀스 이름(기본 : hibernate_sequence)</li>
<li>initialValue : DDL 생성 시에만 사용됨, 시퀀스 DDL을 생성할 때 처음 1 시작하는 수를 지정한다.(기본 : 1)</li>
<li>allocationSize : 시퀀스 한 번 호출에 증가한느 수 (성능 최적화에 사용됨 데이터 시퀀스 값이 하나씩 증가하도록 설정되어 있으면 이 값을 반드시 1로 설정해야 한다.)(기본 값: 50)</li>
</ul>
<h1 id="TABLE-전략"><a href="#TABLE-전략" class="headerlink" title="TABLE 전략"></a>TABLE 전략</h1><ul>
<li>키 생성 전용 테이블을 하나 만들어서 데이터베이스 시퀀스를 흉내내는 전략</li>
<li>장점 : 모든 데이터베이스에 적용 가능</li>
<li>단점 : 성능</li>
</ul>
<h1 id="TABLE-전략-매핑"><a href="#TABLE-전략-매핑" class="headerlink" title="TABLE 전략 - 매핑"></a>TABLE 전략 - 매핑</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> MY_SEQUENCES (</span><br><span class="line">    sequence_name <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">not</span> <span class="literal">null</span>,</span><br><span class="line">    next_val <span class="built_in">bigint</span>,</span><br><span class="line">    primary <span class="keyword">key</span> (sequence_name)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@TableGenerator(</span></span><br><span class="line"><span class="meta">            name = &quot;MEMBER_SEQ_GENERATOR&quot;,</span></span><br><span class="line"><span class="meta">            table = &quot;MY_SEQUENCES&quot;,</span></span><br><span class="line"><span class="meta">            pkColumnValue = &quot;MEMBER_SEQ&quot;, allocationSize = 1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.TABLE,</span></span><br><span class="line"><span class="meta">                                generator = &quot;MEMBER_SEQ_GENERATOR&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br></pre></td></tr></table></figure>

<h1 id="TableGenerator-속성"><a href="#TableGenerator-속성" class="headerlink" title="TableGenerator - 속성"></a>TableGenerator - 속성</h1><ul>
<li>name : 식별자 생성기 이름 (필수)</li>
<li>table : 키생성 테이블명 (기본 hibernate_sequences)</li>
<li>pkColumnName : 시퀀스 컬럼명 (기본 sequence_name)</li>
<li>valueColumnNa : 시퀀스 값 컴럼명 (기본 next_val)</li>
<li>pkColumnValue : 키로 사용할 값 이름 (엔티티 이름)</li>
<li>initialValue : 초기 값, 마지막으로 생성된 값이 기준이다.(기본 0)</li>
<li>allocationSize : 시퀀스 한 번 호출에 증가하는 수(성능 최적화에 사용됨) (기본 50)</li>
<li>catalog, schema : 데이터베이스 catalog, schema 이름</li>
<li>uniqueConstraint : 유니크 제약 조건을 지정할 수 있다.</li>
</ul>
<h1 id="권장하는-식별자-전략"><a href="#권장하는-식별자-전략" class="headerlink" title="권장하는 식별자 전략"></a>권장하는 식별자 전략</h1><ul>
<li>기본 키 제약 조건 : null 아님, 유일, 변하면 안된다.</li>
<li>미래까지 이 조건을 만족하는 자연키는 찾기 어렵다. 대리키(대체키)를 사용하자.</li>
<li>예를 들어 주민등록번호도 기본 키로 적절하지 않다.</li>
<li>권장 : Long형 + 대체키 + 키 생성전략 사용.</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://wanni0928.github.io/2020/09/09/JPA-basic-2-Objec-Table-mapping/" data-id="ckeursmhc00004ov5cdrcfuje" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JPA/" rel="tag">JPA</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-JPA_basic -1- Entity persistence" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/08/JPA_basic%20-1-%20Entity%20persistence/" class="article-date">
  <time datetime="2020-09-08T01:40:32.000Z" itemprop="datePublished">2020-09-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/09/08/JPA_basic%20-1-%20Entity%20persistence/">JPA_basic -1- Entity persistence</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="JPA에서-가장-중요한-2가지"><a href="#JPA에서-가장-중요한-2가지" class="headerlink" title="JPA에서 가장 중요한 2가지"></a>JPA에서 가장 중요한 2가지</h1><ol>
<li><p>객체와 관계형 데이터베이스 매핑하기<br>(Object Relational Mapping)</p>
</li>
<li><p>영속성 컨텍스트</p>
</li>
</ol>
<h2 id="영속성-컨텍스트"><a href="#영속성-컨텍스트" class="headerlink" title="영속성 컨텍스트"></a>영속성 컨텍스트</h2><ul>
<li>JPA를 이해하는데 가장 중요한 용어</li>
<li>“엔티티를 영구 저장하는 환경”</li>
<li><code>EntityManager.persist(entity);</code></li>
</ul>
<h2 id="엔티티-매니저-영속성-컨텍스트"><a href="#엔티티-매니저-영속성-컨텍스트" class="headerlink" title="엔티티 매니저? 영속성 컨텍스트?"></a>엔티티 매니저? 영속성 컨텍스트?</h2><ul>
<li>영속성 컨텍스트는 논리적인 개념</li>
<li>눈에 보이지 않는다.</li>
<li>엔티티 매니저를 통해서 영속성 컨텍스트에 접근</li>
</ul>
<h2 id="J2SE-환경"><a href="#J2SE-환경" class="headerlink" title="J2SE 환경"></a>J2SE 환경</h2><p>엔티티 매니저와 영속성 컨텍스트가 1:1</p>
<h2 id="J2EE-스프링-프레임워크와-같은-컨테이너-환경"><a href="#J2EE-스프링-프레임워크와-같은-컨테이너-환경" class="headerlink" title="J2EE, 스프링 프레임워크와 같은 컨테이너 환경"></a>J2EE, 스프링 프레임워크와 같은 컨테이너 환경</h2><p>엔티티 매니저와 영속성 컨텍스트가 N:1</p>
<h2 id="엔티티의-생명주기"><a href="#엔티티의-생명주기" class="headerlink" title="엔티티의 생명주기"></a>엔티티의 생명주기</h2><ul>
<li>비영속 (new/transient) : 영속성 컨텍스트와 전혀 관계가 없는 새로운 상태</li>
<li>영속 (managed) : 영속성 컨텍스트에 관리되는 상태</li>
<li>준영속 (detached) : 영속성 컨텍스트에 저장되었다가 분리된 상태</li>
<li>삭제 (removed) : 삭제된 상태</li>
</ul>
<h3 id="비영속"><a href="#비영속" class="headerlink" title="비영속"></a>비영속</h3><p>: 아무것도 아닌 상태</p>
<h3 id="영속"><a href="#영속" class="headerlink" title="영속"></a>영속</h3><p>: persist 에 집어넣은 상태</p>
<h3 id="준영속-삭제"><a href="#준영속-삭제" class="headerlink" title="준영속, 삭제"></a>준영속, 삭제</h3><h2 id="영속성-컨텍스트의-이점"><a href="#영속성-컨텍스트의-이점" class="headerlink" title="영속성 컨텍스트의 이점"></a>영속성 컨텍스트의 이점</h2><ul>
<li>1차 캐시 : 한번 조회한건 쿼리로 날아가지 않는다.(동일한 트랜잭션 안에서)</li>
<li>동일성 보장</li>
<li>트랜잭션을 지원하는 쓰기 지연 : 버퍼링 - <code>write</code>을 모았다가 한번에 <code>write</code></li>
<li>변경 감지(Dirty Checking) : update 할때, JPA가 자동으로 인식해서 flush 해주는 것.</li>
<li>지연 로딩(Lazy Loading)</li>
</ul>
<h2 id="엔티티-조회-1차캐시"><a href="#엔티티-조회-1차캐시" class="headerlink" title="엔티티 조회, 1차캐시"></a>엔티티 조회, 1차캐시</h2><p>1차 캐시 : 한번 조회한건 쿼리로 날아가지 않는다.(동일한 트랜잭션 안에서)</p>
<h1 id="플러시"><a href="#플러시" class="headerlink" title="플러시"></a>플러시</h1><p>영속성 컨텍스트의 변경내용을 데이터베이스에 반영.</p>
<h2 id="플러시-발생"><a href="#플러시-발생" class="headerlink" title="플러시 발생"></a>플러시 발생</h2><ul>
<li>변경 감지</li>
<li>수정된 엔티티 쓰기 지연 SQL 저장소에 등록</li>
<li>쓰기 지연 SQL 저장소의 쿼리슷 데이터베이스에 전송 (등록, 수정, 삭제 쿼리)</li>
</ul>
<h2 id="플러시-모드-옵션"><a href="#플러시-모드-옵션" class="headerlink" title="플러시 모드 옵션"></a>플러시 모드 옵션</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">em.setFlushMode(flushModeType.COMMIT);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>FlushModeType.AUTO</code> : 커밋이나 쿼리를 실행할 때 플러시 (기본값, 거의 이것만 씀)</li>
<li><code>FlushModeType.COMMIT</code> : 커밋할 때만 플러시 (활용성 거의 0)</li>
</ul>
<h2 id="플러시는"><a href="#플러시는" class="headerlink" title="플러시는!"></a>플러시는!</h2><ul>
<li>영속성 컨텍스트를 비우지 않는다.</li>
<li>영속성 컨텍스트의 변경 내용을 데이터베이스에 동기화</li>
<li>트랜잭션이라는 작업 단위가 중요 -&gt; 커밋 직전에만 동기화 하면 됨.</li>
</ul>
<h1 id="준영속-상태"><a href="#준영속-상태" class="headerlink" title="준영속 상태"></a>준영속 상태</h1><ul>
<li>영속 -&gt; 준영속</li>
<li>영속 상태의 엔티티가 영속성 컨텍스트에서 분리(detached).</li>
<li>영속성 컨텍스트가 제공하는 기능을 사용 못함.</li>
</ul>
<h2 id="준영속-상태로-만드는-방법"><a href="#준영속-상태로-만드는-방법" class="headerlink" title="준영속 상태로 만드는 방법"></a>준영속 상태로 만드는 방법</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 특정 엔티티만 준영속 상태로 전환</span></span><br><span class="line">em.detach(entity);</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 영속성 컨텍스트를 완전히 초기화</span></span><br><span class="line">em.clear();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 영속성 컨텍스트를 종료</span></span><br><span class="line">em.close();</span><br></pre></td></tr></table></figure>

<p>출처 : <a target="_blank" rel="noopener" href="https://www.inflearn.com/course/ORM-JPA-Basic/dashboard">김영한 - 자바 ORM 표준 JPA 프로그래밍 - 기본편</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://wanni0928.github.io/2020/09/08/JPA_basic%20-1-%20Entity%20persistence/" data-id="cketah6wo00007sv5bq253svo" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JPA/" rel="tag">JPA</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-algorithm-7-h-rod-cutting" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/28/algorithm-7-h-rod-cutting/" class="article-date">
  <time datetime="2020-08-28T08:05:51.000Z" itemprop="datePublished">2020-08-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/28/algorithm-7-h-rod-cutting/">algorithm-7-h-rod-cutting</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="전화번호-목록"><a href="#전화번호-목록" class="headerlink" title="전화번호 목록"></a>전화번호 목록</h1><h2 id="문제-설명"><a href="#문제-설명" class="headerlink" title="문제 설명"></a>문제 설명</h2><p>길이가 N인 막대기가 있다. 막대기를 길이가 자연수가 되도록 여러 조각으로 자를 수 있다.</p>
<p>막대기는 자르는 길이에 따라 값이 정해져 있다. 막대를 자르는 값어치의 합이 최대가 되게끔 막대기를 자르자.</p>
<p>예를 들어, 길이가 4인 막대기를 자를 때, 길이 별 받을 수 있는 값이 아래와 같다고 하자.<br>Length | 1 | 2 | 3 | 4<br>———— | ————- | ————- | ————- | ————-<br>Cost | 1 | 5 | 8 | 9</p>
<p>이 경우에 길이 2에 cost 5인 막대기 두 개가 되게끔 자르면 전체 값어치가 10으로 최대로 값을 받을 수 있을 것이다.</p>
<p>첫 줄에 막대기 길이 N(1&lt;= N &lt;= 3000)이 주어지고,</p>
<p>두번째 줄에 1000이하의 자연수 N 개가 공백으로 구분되어 주어진다. i번째 자연수는 길이 i 막대기의 값을 의미한다.</p>
<p>첫 줄에 값어치 합이 최대가 되도록 막대기를 자를 때, 값어치 합을 출력한다.</p>
<p>예제 입력 : </p>
<p>4</p>
<p>1 5 8 9</p>
<p>예제 출력 : 10</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.programmers.algorithm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.util.StringTokenizer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RodCutting</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> N;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> BufferedReader br;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> StringTokenizer st;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> [] partPrice;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> [] maxPricePerLength;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> NumberFormatException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line"></span><br><span class="line">        N = Integer.parseInt(br.readLine());</span><br><span class="line"></span><br><span class="line">        partPrice = <span class="keyword">new</span> <span class="keyword">int</span> [N+<span class="number">1</span>];</span><br><span class="line">        maxPricePerLength = <span class="keyword">new</span> <span class="keyword">int</span> [N+<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">        st = <span class="keyword">new</span> StringTokenizer(br.readLine(), <span class="string">&quot; &quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++) &#123;</span><br><span class="line">            partPrice[i] = Integer.parseInt(st.nextToken());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        br.close();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i; j++) &#123;</span><br><span class="line">                max = Math.max(max, partPrice[j] + maxPricePerLength[i-j]);</span><br><span class="line">            &#125;</span><br><span class="line">            maxPricePerLength[i] = max;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(maxPricePerLength[N]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://wanni0928.github.io/2020/08/28/algorithm-7-h-rod-cutting/" data-id="ckedyfuaj0000rcv513lq5v9g" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dp/" rel="tag">dp</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-algorithm-6-h-index" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/28/algorithm-6-h-index/" class="article-date">
  <time datetime="2020-08-28T07:59:47.000Z" itemprop="datePublished">2020-08-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/28/algorithm-6-h-index/">algorithm-6-h-index</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="H-Index-출처-프로그래머스"><a href="#H-Index-출처-프로그래머스" class="headerlink" title="H-Index 출처: 프로그래머스"></a>H-Index <a target="_blank" rel="noopener" href="https://programmers.co.kr/learn/courses/30/lessons/42747">출처: 프로그래머스</a></h1><h2 id="문제-설명"><a href="#문제-설명" class="headerlink" title="문제 설명"></a>문제 설명</h2><p>H-Index는 과학자의 생산성과 영향력을 나타내는 지표입니다. 어느 과학자의 H-Index를 나타내는 값인 h를 구하려고 합니다. 위키백과1에 따르면, H-Index는 다음과 같이 구합니다.</p>
<p>어떤 과학자가 발표한 논문 n편 중, h번 이상 인용된 논문이 h편 이상이고 나머지 논문이 h번 이하 인용되었다면 h의 최댓값이 이 과학자의 H-Index입니다.</p>
<p>어떤 과학자가 발표한 논문의 인용 횟수를 담은 배열 citations가 매개변수로 주어질 때, 이 과학자의 H-Index를 return 하도록 solution 함수를 작성해주세요.</p>
<h2 id="제한-사항"><a href="#제한-사항" class="headerlink" title="제한 사항"></a>제한 사항</h2><ul>
<li>과학자가 발표한 논문의 수는 1편 이상 1,000편 이하입니다.</li>
<li>논문별 인용 횟수는 0회 이상 10,000회 이하입니다.</li>
</ul>
<h2 id="입출력-예"><a href="#입출력-예" class="headerlink" title="입출력 예"></a>입출력 예</h2><table>
<thead>
<tr>
<th>citations</th>
<th>return</th>
</tr>
</thead>
<tbody><tr>
<td>[3, 0, 6, 1, 5]</td>
<td>3</td>
</tr>
</tbody></table>
<h2 id="입출력-예-설명"><a href="#입출력-예-설명" class="headerlink" title="입출력 예 설명"></a>입출력 예 설명</h2><p>이 과학자가 발표한 논문의 수는 5편이고, 그중 3편의 논문은 3회 이상 인용되었습니다. 그리고 나머지 2편의 논문은 3회 이하 인용되었기 때문에 이 과학자의 H-Index는 3입니다.</p>
<h2 id="문제인식"><a href="#문제인식" class="headerlink" title="문제인식"></a>문제인식</h2><ol>
<li>h-index 설명에 의하면, 인용된 수를 내림차순으로 정렬한 후, 피인용수가 논문수와 같아지거나 피용수가 논문 수보다 더 작아지는 지점을 h-index라고 한다.</li>
</ol>
<h2 id="해결방향"><a href="#해결방향" class="headerlink" title="해결방향"></a>해결방향</h2><ol>
<li>인용수가 증가하다가 감소하는 ‘최소값’을 찾으면 된다.</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Comparator;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] citations)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> answer = <span class="number">0</span>;</span><br><span class="line">        Integer[] num = <span class="keyword">new</span> Integer[citations.length];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; citations.length; i++)&#123;</span><br><span class="line">            num[i] = citations[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Arrays.sort(num, Collections.reverseOrder());   </span><br><span class="line">        <span class="keyword">while</span>(answer &lt; citations.length)&#123;</span><br><span class="line">            <span class="keyword">if</span>(num[answer] &lt;= answer)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            answer++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://wanni0928.github.io/2020/08/28/algorithm-6-h-index/" data-id="ckedy4tt2000624v5adle13mj" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-algorithm-5-disk-controller" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/28/algorithm-5-disk-controller/" class="article-date">
  <time datetime="2020-08-28T07:58:54.000Z" itemprop="datePublished">2020-08-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/28/algorithm-5-disk-controller/">algorithm-5-disk-controller</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="디스크컨트롤러-출처-프로그래머스"><a href="#디스크컨트롤러-출처-프로그래머스" class="headerlink" title="디스크컨트롤러 출처: 프로그래머스"></a>디스크컨트롤러 <a target="_blank" rel="noopener" href="https://programmers.co.kr/learn/courses/30/lessons/42627">출처: 프로그래머스</a></h1><h2 id="문제-설명"><a href="#문제-설명" class="headerlink" title="문제 설명"></a>문제 설명</h2><p>하드디스크는 한 번에 하나의 작업만 수행할 수 있습니다. 디스크 컨트롤러를 구현하는 방법은 여러 가지가 있습니다. 가장 일반적인 방법은 요청이 들어온 순서대로 처리하는 것입니다.</p>
<p>예를들어</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- 0ms 시점에 3ms가 소요되는 A작업 요청</span><br><span class="line">- 1ms 시점에 9ms가 소요되는 B작업 요청</span><br><span class="line">- 2ms 시점에 6ms가 소요되는 C작업 요청</span><br></pre></td></tr></table></figure>

<p>와 같은 요청이 들어왔습니다. 이를 그림으로 표현하면 아래와 같습니다.<br><img src="https://raw.githubusercontent.com/wanni0928/-algorithm/master/JAVA/DiskController/images/38dc6a53-2d21-4c72-90ac-f059729c51d5.png" alt="디스크 컨트롤러"></p>
<p>한 번에 하나의 요청만을 수행할 수 있기 때문에 각각의 작업을 요청받은 순서대로 처리하면 다음과 같이 처리 됩니다.</p>
<p><img src="https://raw.githubusercontent.com/wanni0928/-algorithm/master/JAVA/DiskController/images/90b91fde-cac4-42c1-98b8-8f8431c52dcf.png" alt="디스크 컨트롤러2"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- A: 3ms 시점에 작업 완료 (요청에서 종료까지 : 3ms)</span><br><span class="line">- B: 1ms부터 대기하다가, 3ms 시점에 작업을 시작해서 12ms 시점에 작업 완료(요청에서 종료까지 : 11ms)</span><br><span class="line">- C: 2ms부터 대기하다가, 12ms 시점에 작업을 시작해서 18ms 시점에 작업 완료(요청에서 종료까지 : 16ms)</span><br></pre></td></tr></table></figure>
<p>이 때 각 작업의 요청부터 종료까지 걸린 시간의 평균은 10ms(= (3 + 11 + 16) / 3)가 됩니다.</p>
<p>하지만 A → C → B 순서대로 처리하면</p>
<p><img src="https://raw.githubusercontent.com/wanni0928/-algorithm/master/JAVA/DiskController/images/a6cff04d-86bb-4b5b-98bf-6359158940ac.png" alt="디스크 컨트롤러3"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- A: 3ms 시점에 작업 완료(요청에서 종료까지 : 3ms)</span><br><span class="line">- C: 2ms부터 대기하다가, 3ms 시점에 작업을 시작해서 9ms 시점에 작업 완료(요청에서 종료까지 : 7ms)</span><br><span class="line">- B: 1ms부터 대기하다가, 9ms 시점에 작업을 시작해서 18ms 시점에 작업 완료(요청에서 종료까지 : 17ms)</span><br></pre></td></tr></table></figure>
<p>이렇게 A → C → B의 순서로 처리하면 각 작업의 요청부터 종료까지 걸린 시간의 평균은 9ms(= (3 + 7 + 17) / 3)가 됩니다.</p>
<p>각 작업에 대해 [작업이 요청되는 시점, 작업의 소요시간]을 담은 2차원 배열 jobs가 매개변수로 주어질 때, 작업의 요청부터 종료까지 걸린 시간의 평균을 가장 줄이는 방법으로 처리하면 평균이 얼마가 되는지 return 하도록 solution 함수를 작성해주세요. (단, 소수점 이하의 수는 버립니다)</p>
<h2 id="제한-사항"><a href="#제한-사항" class="headerlink" title="제한 사항"></a>제한 사항</h2><ul>
<li>jobs의 길이는 1 이상 500 이하입니다.</li>
<li>jobs의 각 행은 하나의 작업에 대한 [작업이 요청되는 시점, 작업의 소요시간] 입니다.</li>
<li>각 작업에 대해 작업이 요청되는 시간은 0 이상 1,000 이하입니다.</li>
<li>각 작업에 대해 작업의 소요시간은 1 이상 1,000 이하입니다.</li>
<li>하드디스크가 작업을 수행하고 있지 않을 때에는 먼저 요청이 들어온 작업부터 처리합니다.</li>
</ul>
<h2 id="입출력-예"><a href="#입출력-예" class="headerlink" title="입출력 예"></a>입출력 예</h2><table>
<thead>
<tr>
<th>jobs</th>
<th>Second Header</th>
</tr>
</thead>
<tbody><tr>
<td>[[0, 3], [1, 9], [2, 6]]</td>
<td>9</td>
</tr>
</tbody></table>
<h2 id="입출력-예-설명"><a href="#입출력-예-설명" class="headerlink" title="입출력 예 설명"></a>입출력 예 설명</h2><p>문제에 주어진 예와 같습니다.</p>
<ul>
<li>0ms 시점에 3ms 걸리는 작업 요청이 들어옵니다.</li>
<li>1ms 시점에 9ms 걸리는 작업 요청이 들어옵니다.</li>
<li>2ms 시점에 6ms 걸리는 작업 요청이 들어옵니다.</li>
</ul>
<h2 id="문제인식"><a href="#문제인식" class="headerlink" title="문제인식"></a>문제인식</h2><ol>
<li>‘하드디스크가 작업을 수행하고 있지 않을 때에는 먼저 요청이 들어온 작업부터 처리합니다.’<br> =&gt; 시작은 작업 요청 시점이 0인 작업부터, 바로 우선순위 큐로 정렬하면, 이 규칙에 어긋난다.</li>
<li>평균 처리시간을 줄이기 위해선, 작업 요청 시점 순으로 처리하는 것보다, 작업 처리시간의 적은 것부터 처리하는것이 더 효율적이다.</li>
</ol>
<h2 id="해결방향"><a href="#해결방향" class="headerlink" title="해결방향"></a>해결방향</h2><ol>
<li>문제인식 1번 부분을 충족하기 위해, 우선 주어진 배열을 ‘작업요청시점’의 오름차순으로 정렬한다.</li>
<li>문제인식 2번 부분을 충족하기 위한, 우선순위 큐의 인스턴스를 생성하고, ‘작업처리시간’의 오름차순의 정렬기준을 준다.</li>
<li>문제를 해결하기 위해, 반복문을 선언하는데, 종료 기준을 주어진 배열의 맨끝 인덱스까지, 혹은 큐가 비어있지 않을 때까지로 정한다.</li>
<li>3번의 반복문 안에 큐에 디스크 작업을 넣는 반복문을 선언하는데, 종료 기준을 ‘작업요청 시점’이하 그리고, 인덱스 번호가 배열의 길이미만 일때 까지로 정한다.</li>
<li>3번 반복문이 도는 동안, 4번 반복문을 통해 큐에 jobs 데이터가 삽입된다.</li>
<li>만약 큐가 비어있다면, ‘작업 시작점’에 가장 최근 ,jobs 데이터의 ‘작업요청 시점’을 넣는다.</li>
<li>큐가 비어있지 않다면, 큐의 데이터를 꺼낸다. 작업 처리시간은 <code>이전작업 완료 시점 - 작업이 요청되는 시점 + 작업의 처리시간</code> 로 이 공식대로 총 작업 처리시간을 구한다.</li>
<li>모든 디스크 작업의 처리시간 합계를 구하고 평균을 구한 뒤, 그 정답을 리턴한다.</li>
</ol>
<h2 id="주의사항"><a href="#주의사항" class="headerlink" title="주의사항"></a>주의사항</h2><ul>
<li>대기시간 역시 작업 처리시간에 포함해야 한다. 즉, 7번의 작업 처리시간 공식은 <code>대기사간 + 작업처리시간</code>이다.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.programmers.algorithm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.PriorityQueue;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiskController</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[][] jobs)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> answer = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> idx = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> timePoint = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> length = jobs.length;</span><br><span class="line"></span><br><span class="line">        Queue&lt;<span class="keyword">int</span>[]&gt; queue = <span class="keyword">new</span> PriorityQueue&lt;&gt;(((o1, o2) -&gt; o1[<span class="number">1</span>] - o2[<span class="number">1</span>]));</span><br><span class="line">        Arrays.sort(jobs, (o1, o2) -&gt; o1[<span class="number">0</span>] - o2[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(idx &lt; length || ! queue.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">while</span>(idx &lt; length &amp;&amp; jobs[idx][<span class="number">0</span>] &lt;= timePoint) queue.offer(jobs[idx++]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(queue.isEmpty()) timePoint = jobs[idx][<span class="number">0</span>];</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">int</span>[] job = queue.poll();</span><br><span class="line">                answer += timePoint - job[<span class="number">0</span>] + job[<span class="number">1</span>];</span><br><span class="line">                timePoint += job[<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> answer/length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DiskControllerTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[][] jobs = &#123;&#123;<span class="number">0</span>, <span class="number">3</span>&#125;, &#123;<span class="number">1</span>,<span class="number">9</span>&#125;, &#123;<span class="number">2</span>, <span class="number">6</span>&#125;&#125;;</span><br><span class="line">        DiskController diskController = <span class="keyword">new</span> DiskController();</span><br><span class="line">        System.out.println(diskController.solution(jobs));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://wanni0928.github.io/2020/08/28/algorithm-5-disk-controller/" data-id="ckedy4tst000124v52inf50gc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/heap/" rel="tag">heap</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-algorithm-4-spicy" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/28/algorithm-4-spicy/" class="article-date">
  <time datetime="2020-08-28T07:57:41.000Z" itemprop="datePublished">2020-08-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/28/algorithm-4-spicy/">algorithm-4-spicy</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="더-맵게-출처-프로그래머스"><a href="#더-맵게-출처-프로그래머스" class="headerlink" title="더 맵게 출처: 프로그래머스"></a>더 맵게 <a target="_blank" rel="noopener" href="https://programmers.co.kr/learn/courses/30/lessons/42626">출처: 프로그래머스</a></h1><h2 id="문제-설명"><a href="#문제-설명" class="headerlink" title="문제 설명"></a>문제 설명</h2><p>매운 것을 좋아하는 Leo는 모든 음식의 스코빌 지수를 K 이상으로 만들고 싶습니다. 모든 음식의 스코빌 지수를 K 이상으로 만들기 위해 Leo는 스코빌 지수가 가장 낮은 두 개의 음식을 아래와 같이 특별한 방법으로 섞어 새로운 음식을 만듭니다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">섞은 음식의 스코빌 지수 &#x3D; 가장 맵지 않은 음식의 스코빌 지수 + (두 번째로 맵지 않은 음식의 스코빌 지수 * 2)</span><br></pre></td></tr></table></figure>

<p>Leo는 모든 음식의 스코빌 지수가 K 이상이 될 때까지 반복하여 섞습니다.<br>Leo가 가진 음식의 스코빌 지수를 담은 배열 scoville과 원하는 스코빌 지수 K가 주어질 때, 모든 음식의 스코빌 지수를 K 이상으로 만들기 위해 섞어야 하는 최소 횟수를 return 하도록 solution 함수를 작성해주세요.</p>
<h2 id="제한-사항"><a href="#제한-사항" class="headerlink" title="제한 사항"></a>제한 사항</h2><ul>
<li>scoville의 길이는 2 이상 1,000,000 이하입니다.</li>
<li>K는 0 이상 1,000,000,000 이하입니다.</li>
<li>scoville의 원소는 각각 0 이상 1,000,000 이하입니다.</li>
<li>모든 음식의 스코빌 지수를 K 이상으로 만들 수 없는 경우에는 -1을 return 합니다.</li>
</ul>
<h2 id="입출력-예"><a href="#입출력-예" class="headerlink" title="입출력 예"></a>입출력 예</h2><table>
<thead>
<tr>
<th>scoville</th>
<th>K</th>
<th>return</th>
</tr>
</thead>
<tbody><tr>
<td>[1, 2, 3, 9, 10, 12]</td>
<td>7</td>
<td>2</td>
</tr>
</tbody></table>
<h2 id="입출력-예-설명"><a href="#입출력-예-설명" class="headerlink" title="입출력 예 설명"></a>입출력 예 설명</h2><ol>
<li><p>스코빌 지수가 1인 음식과 2인 음식을 섞으면 음식의 스코빌 지수가 아래와 같이 됩니다. 새로운 음식의 스코빌 지수 = 1 + (2 * 2) = 5 가진 음식의 스코빌 지수 = [5, 3, 9, 10, 12]</p>
</li>
<li><p>스코빌 지수가 3인 음식과 5인 음식을 섞으면 음식의 스코빌 지수가 아래와 같이 됩니다. 새로운 음식의 스코빌 지수 = 3 + (5 * 2) = 13 가진 음식의 스코빌 지수 = [13, 9, 10, 12]</p>
</li>
</ol>
<p>모든 음식의 스코빌 지수가 7 이상이 되었고 이때 섞은 횟수는 2회입니다.</p>
<h2 id="문제인식"><a href="#문제인식" class="headerlink" title="문제인식"></a>문제인식</h2><ol>
<li>스코빌 공식에 의하면, 가장 맵지 않은 음식과 그 다음으로 맵지 않은 음식을 순차적으로 꺼낼 수 있는 자료구조가 필요하다.</li>
<li>모든 음식이 스코빌 지수를 k 이상으로 만들어야한다. 뒤집어 생각해보면, 하나라도 스코빌 지수가 k 미만이면, 문제조건에 맞지 않는다.</li>
</ol>
<h2 id="해결방향"><a href="#해결방향" class="headerlink" title="해결방향"></a>해결방향</h2><ol>
<li>우선순위 큐를 이용하여, 모든 음식의 스코빌 지수를 오름차순으로 정렬한다.</li>
<li>스코빌 지수 공식에 따라, 두 개씩 뽑아야 하므로, 반복문을 선언할때, 반복조건을 큐의 데이터 갯수를 2개 까지로 제한한다.</li>
<li>문제인식 2번에 따라, 하나라도, k 미만의 음식이 있으면, 실격이므로, 우선순위의 큐의 최소값(head에 해당하는 데이터)이 k 미만 역시 반복조건에 AND로 추가한다.</li>
<li>반복문의 반복 횟수마다 섞은 횟수를 한개 씩 늘려준다.</li>
<li>모든 음식이 K 지수 이상이라면, head 데이터 역시 K 지수 이상으로, 반복문이 끝날 것이고, 그 반복문의 횟수를 리턴하면, 그것이 정답이 될 것이다.</li>
<li>만약 모든 음식을 섞었다면, 큐에 남은 데이터는 최종적으로 하나가 남을 것이다. 그 하나의 데이터가 K 지수보다 낮으면, 모든 음식이 K 지수 미만이므로 이 경우에는 -1을 리턴한다.</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.programmers.algorithm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.PriorityQueue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Spicy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">solution</span><span class="params">(<span class="keyword">int</span>[] scoville, <span class="keyword">int</span> K)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> answer = <span class="number">0</span>;</span><br><span class="line">        PriorityQueue&lt;Integer&gt; scovilleQ = <span class="keyword">new</span> PriorityQueue&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> sco : scoville)&#123;</span><br><span class="line">            scovilleQ.add(sco);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> mixedScoville;</span><br><span class="line">        <span class="keyword">int</span> firstMin;</span><br><span class="line">        <span class="keyword">int</span> secMin;</span><br><span class="line">        <span class="keyword">while</span> (scovilleQ.size() &gt; <span class="number">1</span> &amp;&amp; scovilleQ.peek() &lt; K)&#123;</span><br><span class="line">            firstMin = scovilleQ.poll();</span><br><span class="line">            secMin = scovilleQ.poll();</span><br><span class="line">            mixedScoville = firstMin + (secMin * <span class="number">2</span>);</span><br><span class="line">            scovilleQ.add(mixedScoville);</span><br><span class="line">            answer++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(scovilleQ.size() &lt;= <span class="number">1</span> &amp;&amp; scovilleQ.peek() &lt; K) answer = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpicyTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//case01</span></span><br><span class="line">        <span class="keyword">int</span>[] scoville = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">12</span>&#125;;</span><br><span class="line">        <span class="keyword">int</span> k = <span class="number">99</span>;</span><br><span class="line"></span><br><span class="line">        Spicy spicy = <span class="keyword">new</span> Spicy();</span><br><span class="line">        System.out.println(spicy.solution(scoville, k));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://wanni0928.github.io/2020/08/28/algorithm-4-spicy/" data-id="ckedy4tsr000024v57rm62lb5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/heap/" rel="tag">heap</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-algorithm-3-carpet" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/28/algorithm-3-carpet/" class="article-date">
  <time datetime="2020-08-28T07:54:36.000Z" itemprop="datePublished">2020-08-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/28/algorithm-3-carpet/">algorithm-3-carpet</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="카펫-출처-프로그래머스"><a href="#카펫-출처-프로그래머스" class="headerlink" title="카펫 출처: 프로그래머스"></a>카펫 <a target="_blank" rel="noopener" href="https://programmers.co.kr/learn/courses/30/lessons/42842">출처: 프로그래머스</a></h1><h2 id="문제-설명"><a href="#문제-설명" class="headerlink" title="문제 설명"></a>문제 설명</h2><p>Leo는 카펫을 사러 갔다가 아래 그림과 같이 중앙에는 노란색으로 칠해져 있고 테두리 1줄은 갈색으로 칠해져 있는 격자 모양 카펫을 봤습니다.</p>
<p><img src="https://raw.githubusercontent.com/wanni0928/-algorithm/java/JAVA/Carpet/images/carpet.png" alt="카펫"></p>
<p>Leo는 집으로 돌아와서 아까 본 카펫의 노란색과 갈색으로 색칠된 격자의 개수는 기억했지만, 전체 카펫의 크기는 기억하지 못했습니다.</p>
<p>Leo가 본 카펫에서 갈색 격자의 수 brown, 노란색 격자의 수 yellow가 매개변수로 주어질 때 카펫의 가로, 세로 크기를 순서대로 배열에 담아 return 하도록 solution 함수를 작성해주세요.</p>
<h2 id="제한-사항"><a href="#제한-사항" class="headerlink" title="제한 사항"></a>제한 사항</h2><ul>
<li>갈색 격자의 수 brown은 8 이상 5,000 이하인 자연수입니다.</li>
<li>노란색 격자의 수 yellow는 1 이상 2,000,000 이하인 자연수입니다.</li>
<li>카펫의 가로 길이는 세로 길이와 같거나, 세로 길이보다 깁니다.</li>
</ul>
<h2 id="입출력-예"><a href="#입출력-예" class="headerlink" title="입출력 예"></a>입출력 예</h2><table>
<thead>
<tr>
<th>brown</th>
<th>yellow</th>
<th>return</th>
</tr>
</thead>
<tbody><tr>
<td>10</td>
<td>2</td>
<td>[4, 3]</td>
</tr>
<tr>
<td>8</td>
<td>1</td>
<td>[3, 3]</td>
</tr>
<tr>
<td>24</td>
<td>24</td>
<td>[8, 6]</td>
</tr>
</tbody></table>
<h2 id="문제인식"><a href="#문제인식" class="headerlink" title="문제인식"></a>문제인식</h2><ol>
<li>‘중앙에는 노란색’, ‘테두리 1줄은 갈색’ =&gt; 갈색이 2줄 이상 연속으로 배치되는 경우는 없다. (안쪽에 노란색을 채우고 겉에 갈색으로 감싼다.)</li>
<li>카펫의 가로 길이는 세로 길이와 같거나, 세로 길이보다 길다. =&gt; 정사각형 or 넓은 직사각형.</li>
</ol>
<h2 id="해결방향"><a href="#해결방향" class="headerlink" title="해결방향"></a>해결방향</h2><ol>
<li>갈색 테두리의 갯수 = (노란 카펫 높이 + 노란 카펫 폭 + 2) * 2</li>
<li>노란 카펫의 타일 갯수 만큼 반복문을 돌린다.</li>
<li>노란 카펫의 가로, 세로 길이를 구하고, 1번 공식을 대입한다.</li>
<li>해당 공식이 주어진 갈색 카펫의 갯수와 일치하면, 반복문을 끝내고 정답을 리턴한다.</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] solution(<span class="keyword">int</span> brown, <span class="keyword">int</span> yellow) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] answer = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">int</span> yCol = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> yRow = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> o1 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> o2 = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= yellow; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(yellow % i == <span class="number">0</span>)&#123;</span><br><span class="line">                o1 = i;</span><br><span class="line">                o2 = yellow / i;</span><br><span class="line">                yCol = o1 &gt; o2 ? o1 : o2;</span><br><span class="line">                yRow = o1 &gt; o2 ? o2 : o1;</span><br><span class="line">                result = (yCol + yRow + <span class="number">2</span>) * <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">if</span>(brown == result)&#123;</span><br><span class="line">                    answer[<span class="number">0</span>] = yCol + <span class="number">2</span>;</span><br><span class="line">                    answer[<span class="number">1</span>] = yRow + <span class="number">2</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> answer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://wanni0928.github.io/2020/08/28/algorithm-3-carpet/" data-id="ckedxzdrk0000twv5hj80c5mo" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bp/" rel="tag">bp</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-algorithm-theory-Dynamic-programming" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/27/algorithm-theory-Dynamic-programming/" class="article-date">
  <time datetime="2020-08-27T06:03:10.000Z" itemprop="datePublished">2020-08-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/27/algorithm-theory-Dynamic-programming/">algorithm-theory-Dynamic-programming</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Dynamic-Programming"><a href="#Dynamic-Programming" class="headerlink" title="Dynamic Programming"></a>Dynamic Programming</h1><h2 id="정의"><a href="#정의" class="headerlink" title="정의"></a>정의</h2><ul>
<li>동적 계획법<ul>
<li>입력 크기가 작은 부분 문제들을 해결한 후, 해당 부분 문제의 해를 활용해서, 보다 큰 크기의 부분 문제를 해결, 최종적으로 전체 문제를 해결하는 알고리즘</li>
<li>상향식 접근법으로, 가장 최하위 해답을 구한 후, 이를 저장하고, 해당 결과값을 이용해서 상위 문제를 풀어가는 방식</li>
<li>Memoization 기법을 사용함<ul>
<li>Memoization : 프로그램 실행 시 이전에 계산한 값을 저장하여, 다시 계산하지 않도록 하여 전체 실행 속도를 빠르게 하는 기술</li>
</ul>
</li>
<li>문제를 잘게 쪼겔 때, 부분 문제는 중복되어, 재활용됨.<ul>
<li>예: 파보나치 수열</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/wanni0928/-algorithm/master/algorithm_theory/java/DynamicProgramming/imgs/Fibonacci.png" alt="피보나치 수열"></p>
<p><img src="https://raw.githubusercontent.com/wanni0928/-algorithm/master/algorithm_theory/java/DynamicProgramming/imgs/dp.png" alt="동적 계획법"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Fibonachi</span> </span>&#123;</span><br><span class="line"><span class="comment">// dynamic programing</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">fibonachi</span><span class="params">(<span class="keyword">int</span> num)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(num == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(num == <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> fibonachi(num - <span class="number">1</span>) + fibonachi(num - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">//        fibonacci(0):0</span></span><br><span class="line"><span class="comment">//        fibonacci(1):1</span></span><br><span class="line"><span class="comment">//        fibonacci(2):1</span></span><br><span class="line"><span class="comment">//        fibonacci(3):2</span></span><br><span class="line"><span class="comment">//        fibonacci(4):3</span></span><br><span class="line"><span class="comment">//        fibonacci(5):5</span></span><br><span class="line"><span class="comment">//        fibonacci(6):8</span></span><br><span class="line"><span class="comment">//        fibonacci(7):13</span></span><br><span class="line"><span class="comment">//        fibonacci(8):21</span></span><br><span class="line"><span class="comment">//        fibonacci(9):34</span></span><br><span class="line">        Fibonachi fibo = <span class="keyword">new</span> Fibonachi();</span><br><span class="line">        System.out.println(fibo.fibonachi(<span class="number">9</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://wanni0928.github.io/2020/08/27/algorithm-theory-Dynamic-programming/" data-id="ckecek8ct0000b4v58q9remrj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/algorithm-java/" rel="tag">algorithm java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-algorithm-2-marathon" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/26/algorithm-2-marathon/" class="article-date">
  <time datetime="2020-08-26T06:26:02.000Z" itemprop="datePublished">2020-08-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/26/algorithm-2-marathon/">algorithm-2-marathon</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="완주하지-못한-선수"><a href="#완주하지-못한-선수" class="headerlink" title="완주하지 못한 선수"></a>완주하지 못한 선수</h1><h2 id="문제-설명"><a href="#문제-설명" class="headerlink" title="문제 설명"></a>문제 설명</h2><p>수많은 마라톤 선수들이 마라톤에 참여하였습니다. 단 한 명의 선수를 제외하고는 모든 선수가 마라톤을 완주하였습니다.</p>
<p>마라톤에 참여한 선수들의 이름이 담긴 배열 participant와 완주한 선수들의 이름이 담긴 배열 completion이 주어질 때, 완주하지 못한 선수의 이름을 return 하도록 solution 함수를 작성해주세요.</p>
<h2 id="제한사항"><a href="#제한사항" class="headerlink" title="제한사항"></a>제한사항</h2><ul>
<li>마라톤 경기에 참여한 선수의 수는 1명 이상 100,000명 이하입니다.</li>
<li>completion의 길이는 participant의 길이보다 1 작습니다.</li>
<li>참가자의 이름은 1개 이상 20개 이하의 알파벳 소문자로 이루어져 있습니다.</li>
<li>참가자 중에는 동명이인이 있을 수 있습니다.</li>
</ul>
<h2 id="해결방향"><a href="#해결방향" class="headerlink" title="해결방향"></a>해결방향</h2><ol>
<li><p>문제 인식</p>
<ul>
<li><p>‘참가자의 이름은 1개 이상 20개 이하의 알파벳 소문자로 이루어져 있습니다.’ : 대소문자 구문x</p>
</li>
<li><p>참가자 중에는 동명이인이 있을 수 있다. : 단순히 ‘이름’을 기준으로 진행하면, 중복 삭제가 될 수 있다.</p>
</li>
<li><p>‘completion의 길이는 participant의 길이보다 1 작습니다.’ : 완주하지 못한 선수는 무조건 1명이다.</p>
</li>
</ul>
</li>
<li><p>문제 해결</p>
<ol>
<li><p>같은 이름의 인덱스도 구분해야하기 때문에, HashMap으로 key-value에 해당하는 재너릭 변수명을 각각 ‘이름’, ‘중복횟수’로 지정하고 인스턴스를 초기화 한다.</p>
</li>
<li><p>‘참가자 배열’을 향상된 for문을 돌려 해쉬맵에 “이름”, 1로 put 하되, 같은 이름의 인덱스로 put을 하게 될때마다, 기존 ‘중복횟수’에서 1을 더한다.</p>
</li>
<li><p>‘경쟁자 배열’ 향상된 for문을 돌려 동일하게 해쉬맵에 적용하되, 이미 적용된 해쉬맵이 검색될 때마다. 기존 중복횟수에서 -1을 한다.</p>
</li>
<li><p>해쉬맵 인스턴스가 두개의 for문을 거치면, 결과적으로 0 혹은 1의 값을 가진 키셋이 형성된다.<br> 해당 해쉬맵에 Iterator와 Entry를 이용해, 해쉬 테이블을 전체적으로 검색하고 그중에서 중복횟수 ‘값’이 1을 가진 키가 검색된다면, 그 키 값을 리턴하고, 프로그램을 끝낸다. </p>
</li>
</ol>
</li>
<li><p>주의사항</p>
<ul>
<li><p>다른 사람의 풀이를 보면, 간혹 해쉬앱을 바로 for문에 적용하여, 검색하는 풀이를 볼 수 있는데, 코드의 길이와 가독성을 보면 언듯 더 편리해보이지만, EntrySet의 getValue()가 HashMap의 get() 보다 사용하는 함수의 갯수가 더 적고, 실행 속도도 빠르기 때문에, 해쉬에서 값이나 키를 출력할 때는 EntrySet을 사용하는 것이 결과적으로는 더 효율적이다.</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/3870064/performance-considerations-for-keyset-and-entryset-of-map">출처 : https://stackoverflow.com/questions/3870064/performance-considerations-for-keyset-and-entryset-of-map</a></p>
</li>
</ul>
</li>
</ol>
<p>출처 <a target="_blank" rel="noopener" href="https://programmers.co.kr/learn/courses/30/lessons/42576?language=java">https://programmers.co.kr/learn/courses/30/lessons/42576?language=java</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://wanni0928.github.io/2020/08/26/algorithm-2-marathon/" data-id="ckeazwta60000r4v58ayudp3z" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-algorithm-1-printer" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/08/25/algorithm-1-printer/" class="article-date">
  <time datetime="2020-08-25T06:18:28.000Z" itemprop="datePublished">2020-08-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/08/25/algorithm-1-printer/">algorithm -1 PhoneNumber</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="전화번호-목록"><a href="#전화번호-목록" class="headerlink" title="전화번호 목록"></a>전화번호 목록</h1><h2 id="문제-설명"><a href="#문제-설명" class="headerlink" title="문제 설명"></a>문제 설명</h2><p>전화번호부에 적힌 전화번호 중, 한 번호가 다른 번호의 접두어인 경우가 있는지 확인하려 합니다.<br>전화번호가 다음과 같을 경우, 구조대 전화번호는 영석이의 전화번호의 접두사입니다.</p>
<ul>
<li>구조대 : 119</li>
<li>박준영 : 97 674 223</li>
<li>지영석 : 11 9552 4421</li>
</ul>
<p>전화번호부에 적힌 전화번호를 담은 배열 phone_book 이 solution 함수의 매개변수로 주어질 때, 어떤 번호가 다른 번호의 접두어인 경우가 있으면 false를 그렇지 않으면 true를 return 하도록 solution 함수를 작성해주세요.</p>
<h2 id="제한사항"><a href="#제한사항" class="headerlink" title="제한사항"></a>제한사항</h2><ul>
<li>phone_book의 길이는 1 이상 1,000,000 이하입니다.</li>
<li>각 전화번호의 길이는 1 이상 20 이하입니다.</li>
</ul>
<h2 id="해결방향"><a href="#해결방향" class="headerlink" title="해결방향"></a>해결방향</h2><ol>
<li><p>문제 인식</p>
<ul>
<li><p>‘어떤 번호가 다른 번호의 접두어’인 경우 : 특정 인덱스의 ‘번호’가  다른 인덱스의 ‘번호’에 0번 인덱스 부터 특정 인덱스의 길이 까지 포함된다.</p>
</li>
<li><p>어떤 번호가 다른 번호의 접두어인 경우가 있으면 false : 위의 경우가 하나라도 된다면, 더이상 탐색할 필요가 없다.</p>
</li>
<li><p>첫 번째 경우가 충족하려면 특정 인덱스의 값의 ‘길이’가 비교할 대상의 인덱스의 값의 ‘길이’ 보다 짧아야 한다. : 배열을 값의 길이 순서로 오름차순으로 정렬하는 것이 더 효율적일 수 있다.</p>
</li>
</ul>
</li>
<li><p>문제 해결</p>
<ol>
<li><p>배열의 순서를 값의 길이가 짧은 것 순서대로 재배열 한다.</p>
</li>
<li><p>0번 인덱스를 기준으로 다음 인덱스 까지 접두어로 포함이 되는지 확인한다.</p>
</li>
<li><p>포함되는 인덱스의 값이 있으면, false를 리턴하고, 프로그램을 끝낸다.</p>
</li>
<li><p>포함되는 인덱스의 값이 없다면, 1번 인덱스를 기준으로 다시 2번 과정을 진행한다.</p>
</li>
<li><p>2, 3, 4번 과정을 배열의 끝까지 살펴 봤음에도, 포함되는 인덱스의 값이 없다면, true를 리턴하고 프로그램을 끝낸다.</p>
</li>
</ol>
</li>
<li><p>해결방향</p>
<ol>
<li><p>for문을 이용하여, 배열의 길이 순으로 정리할 수 있지만, 좀더 가독성이 좋고, 시간복잡도도 줄일 수 있는 Arrays api의 sort 함수와 Comparator 인터페이스로 진행한다.(for -&gt; n ~ n^2, Arrays, Comparator -&gt; nlogn)</p>
</li>
<li><p>배열의 요소 하나씩 차례대로 살펴봐야 하기 때문에, 향상된 for문을 사용하고, 접두어로 포함되는 인덱스의 갯수를 리턴하기 위해, stream의 filter().count() 함수를 사용하고 그 갯수를 count 변수에 담는다.</p>
</li>
<li><p>그 갯수가 2개 이상일 경우(1개 이상으로 할 경우, 접두어의 기준으로 삼은 인덱스 의 갯수 까지 포함한다.) false를 리턴. 그렇지 않으면 true를 리턴한다.</p>
</li>
</ol>
</li>
<li><p>주의사항</p>
<ul>
<li><p>Arrays api를 포함한 모든 스트림 기능은 병렬처리 기능을 가진다. 여기서 병렬 처리(Parallel Operation)은 멀티 코어 CPU환경에서 하나의 작업을 분할해서 각각의 코어가 병렬적으로 처리하는 것을 정의한다. 이러한 특성을 가져, 작업 처리 시간을 줄일 수 있다. 하지만, 요소의 수가 적고 요소당 처리 시간이 짧으면, 순차 처리가 오히려 병렬 처리보다 빠를 수 있다.</p>
</li>
<li><p>요약하자면, java util 내의 api 함수를 사용하는 것이 무조건 빠르다고는 할 수 없다.</p>
</li>
</ul>
</li>
</ol>
<p>출처 <a target="_blank" rel="noopener" href="https://programmers.co.kr/learn/courses/30/lessons/42577">https://programmers.co.kr/learn/courses/30/lessons/42577</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://wanni0928.github.io/2020/08/25/algorithm-1-printer/" data-id="cke9k7x190000g4v5gq6p96ik" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hash/" rel="tag">hash</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JPA/" rel="tag">JPA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/algorithm-java/" rel="tag">algorithm java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bp/" rel="tag">bp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dp/" rel="tag">dp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hash/" rel="tag">hash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/heap/" rel="tag">heap</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/JPA/" style="font-size: 20px;">JPA</a> <a href="/tags/algorithm-java/" style="font-size: 10px;">algorithm java</a> <a href="/tags/bp/" style="font-size: 10px;">bp</a> <a href="/tags/dp/" style="font-size: 10px;">dp</a> <a href="/tags/hash/" style="font-size: 10px;">hash</a> <a href="/tags/heap/" style="font-size: 20px;">heap</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/09/09/JPA-basic-2-Objec-Table-mapping/">JPA_basic -2- Objec&amp;Table mapping</a>
          </li>
        
          <li>
            <a href="/2020/09/08/JPA_basic%20-1-%20Entity%20persistence/">JPA_basic -1- Entity persistence</a>
          </li>
        
          <li>
            <a href="/2020/08/28/algorithm-7-h-rod-cutting/">algorithm-7-h-rod-cutting</a>
          </li>
        
          <li>
            <a href="/2020/08/28/algorithm-6-h-index/">algorithm-6-h-index</a>
          </li>
        
          <li>
            <a href="/2020/08/28/algorithm-5-disk-controller/">algorithm-5-disk-controller</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 wanni0928<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>